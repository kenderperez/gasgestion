{% extends 'base.html' %}

{% block title %}Agregar Ficha de Combustible{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">Agregar Nueva Ficha de Combustible</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="card">
        <div class="card-header">
            Datos de la Ficha
        </div>
        <div class="card-body">
            <form action="{{ url_for('add_ficha') }}" method="POST">
                <div class="form-group row">
                    <label for="fecha" class="col-sm-2 col-form-label">Fecha:</label>
                    <div class="col-sm-4">
                        <input type="date" class="form-control" id="fecha" name="fecha" required>
                    </div>
                    <label for="estacion" class="col-sm-2 col-form-label">Estación:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="estacion" name="estacion" required>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="combustible" class="col-sm-2 col-form-label">Tipo de Combustible:</label>
                    <div class="col-sm-4">
                        <select class="form-control" id="combustible" name="combustible" required>
                            <option value="">Seleccionar</option>
                            <option value="Gasolina 91">Gasolina 91</option>
                            <option value="Gasolina 95">Gasolina 95</option>
                            <option value="Diésel">Diésel</option>
                        </select>
                    </div>
                    <label for="litros" class="col-sm-2 col-form-label">Litros:</label>
                    <div class="col-sm-4">
                        <input type="number" step="0.01" class="form-control" id="litros" name="litros" required>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="autoriza" class="col-sm-2 col-form-label">Autoriza:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="autoriza" name="autoriza" required>
                    </div>
                </div>

                <h4 class="mt-4 mb-3">Datos del Beneficiario</h4>
                <div class="form-group row">
                    <label for="beneficiario_nombre" class="col-sm-2 col-form-label">Nombre:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="beneficiario_nombre" name="beneficiario_nombre" 
                               value="{{ beneficiario_precargado.nombre if beneficiario_precargado else '' }}" required>
                    </div>
                    <label for="beneficiario_tipo" class="col-sm-2 col-form-label">Tipo:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="beneficiario_tipo" name="beneficiario_tipo" 
                               value="{{ beneficiario_precargado.tipo if beneficiario_precargado else '' }}" required>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="beneficiario_cedula" class="col-sm-2 col-form-label">Cédula:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="beneficiario_cedula" name="beneficiario_cedula" 
                               value="{{ beneficiario_precargado.cedula if beneficiario_precargado else '' }}" required>
                    </div>
                    <label for="beneficiario_telefono" class="col-sm-2 col-form-label">Teléfono:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="beneficiario_telefono" name="beneficiario_telefono" 
                               value="{{ beneficiario_precargado.telefono if beneficiario_precargado else '' }}">
                    </div>
                </div>

                <h4 class="mt-4 mb-3">Datos del Vehículo</h4>
                <div class="form-group row">
                    <label for="vehiculo_tipo" class="col-sm-2 col-form-label">Tipo de Vehículo:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="vehiculo_tipo" name="vehiculo_tipo" required>
                    </div>
                    <label for="vehiculo_marca_modelo" class="col-sm-2 col-form-label">Marca/Modelo:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="vehiculo_marca_modelo" name="vehiculo_marca_modelo" required>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="vehiculo_color" class="col-sm-2 col-form-label">Color:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="vehiculo_color" name="vehiculo_color" required>
                    </div>
                    <label for="vehiculo_placa" class="col-sm-2 col-form-label">Placa:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="vehiculo_placa" name="vehiculo_placa" required>
                    </div>
                </div>

                <div class="form-group mt-4">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-save"></i> Guardar Ficha
                    </button>
                    <a href="{{ url_for('index') }}" class="btn btn-secondary btn-lg ml-2">
                        <i class="fas fa-times-circle"></i> Cancelar
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}